{% extends 'base.j2' %}
<!DOCTYPE html>
<html>

{% block head %}

    <head>
        <title></title>
    </head>

{% endblock %}

{% block body %}



    <body>
        <h1></h1>
        <h2></h2>
        <h3>Artist Management</h3>
        <p></p>
        <br>

        <div id="search">
            <form id="artist_search" method="POST">
                <label><strong>Search Artists by first or last name:</strong></label>
            <input type="text" id="ArtistName" name="ArtistName" placeholder="First/Last Name">
            <input class="btn btn-primary" type="submit" name="searchArtist" value="Search">
            </form>
            </div>
            
            {% if search_results %}
                <fieldset>
                {{ "Search Results: " }}
            <table border="1" cellpadding="5">
            <thead>
                <tr>
                {% for key in search_results[0].keys() %}
                <th> {{ key }} </th>
                    {% endfor %}
                </tr>
            <tbody>
            
            {% for r in search_results %}
                <tr>
                {% for key in r.keys() %}
                <td>{{r[key]}}</td> 
                {% endfor %}
                </tr>
            {% endfor %}
            </table>
            <a href='/artists'><input class="btn" type="button" value="Clear Search Results"></a>
            </fieldset>
            <p>&nbsp;</p>
            {% endif %}
    
    <p></p>

        <br>

        <table>
        <thead>
        <tr>
            <!-- Iterate through each key in the first entry to get the
            column name -->
            {% for key in Artists[0].keys() %}

            <!-- Create a <th> tag with the key inside of it, this will be
            our header row -->
            <th>{{ key }}</th>

            <!-- End of this for loop -->
            {% endfor %}
        </tr>
        <tbody>

        <!-- Now, iterate through every person in Artists -->
        {% for person in Artists %}
        <tr>
            <!-- Then iterate through every key in the current person dictionary -->
            {% for key in person.keys() %}

            <!-- Create a <td> element with the value of that key in it -->
            <td>{{person[key]}}</td>
            {% endfor %}
        
            <!-- Create our edit/delete buttons -->
            <td><a href="artist_edit/{{person.id}}" <i class="fa-solid fa-pen"></i></a></td>
            <td><a href="artist_delete/{{person.id}}" <i class="fa-solid fa-trash"></i></a></td>
        </tr>
        {% endfor %}
        </table>

        <br>

        <p><a href="{{ url_for('artist_add') }}" <i class="btn btn-primary"> Add New</i></a></p>

    </body>

{% endblock %}

{% block footer %}

    <footer>


    </footer>

{% endblock %}

</html>
